<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Issue Report</title>
    
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <!--Form-->
    <form action="#"class="complaint-form" id="complaint-form">
        <!--Heading-->
        <div class="heading">
            <h2>Issue Report Form</h2>
        </div>
        <!--Customer Info-->
        <div class="info">
            <div class="info-detail">
                <label for="name"> Full Name: *</label>
                <input type="text" id="name">
            </div>
            <div class="info-detail">
                <label for="email">Email: *</label>
                <input type="email" id="email">
            </div>
            <div class="info-detail">
                <label for="telephone">Telephone Number: *</label>
                <input type="text" id="telephone" placeholder="+233">
            </div>
        </div>
        <!--COmplaint-->
        <h4>Reason for reporting this issue? * <i class="fas fa-info-circle"></i></h4>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        <!--Complaint category-->
        <div class="report-option">
            <div class="radio-option">
                <label for="transaction">Transaction issue
                    <input type="radio" id="transaction" class="report-reason" value="transaction issue" name="report-reason" onclick="selectOption(this)"> 
                </label>
            </div>
            <div class="radio-option">
                <label for="account">Account management issue
                    <input type="radio" id="account" class="report-reason" value="account management issue" name="report-reason" onclick="selectOption(this)">
                </label>
            </div>
            <div class="radio-option">
                <label for="security">Security issue
                    <input type="radio" id="security" class="report-reason" value="performance" name="report-reason" onclick="selectOption(this)">
                </label>
            </div>
            <div class="radio-option">
                <label for="performance">Performance issue
                    <input type="radio" id="performance" class="report-reason" value="error " name="report-reason" onclick="selectOption(this)">
                </label>
            </div>
            <div class="radio-option">
                <label for="error">Crash/Error
                    <input type="radio" id="error" class="report-reason" value="error " name="report-reason" onclick="selectOption(this)">
                </label>
            </div>
        </div>
        <!--comment area-->
        <h4>Please give clarity on the issue. Help us understand * <br>
            <h7 class="explanation">Please provide a detailed description of the issue and any relevant information we would need to resolve it</h7>
        </h4>
        <textarea id="complaint" placeholder="  Describe the issue in detail...." oninput="countWords(this)"></textarea>
        <p class="word-count" id="wordCount">words:  </p>
        <!--Script to count the words-->
        <script>
            function countWords(){
                const textarea = document.getElementById('complaint');
                const text = textarea.value.trim();

                //split the text by spaces and filter out any empty strings
                const words = text.split(/\s+/).filter(word=>word.length>0);
                const wordCount = words.length;
                const wordLimit =500;
                //update the word count display
                const wordCountDisplay = document.getElementById('wordCount');
                wordCountDisplay.innerText = `Words: ${wordCount} / ${wordLimit}`;
                //prevent further typing if the word count exceeds the limit
                if(wordCount > wordLimit){
                    //trim to 1000 words
                    textarea.value = words.slice(0,wordLimit).join('');
                }
            }
        </script>
        <br>
        <!--Insert images-->
        <div class="image-section">
            <h4>Attach files</h4>
            <h5 class="explanation"> Attach a screenshot, screen recordning or any relevant file to help us understand the issue</h5>
            <input type="file" id="image" accept="image/*"></input>
            <div class="file-upload">
                <label for="image">Choose Image</label><br>
            </div> 
            <!--Image preview-->
            <div id="imagePreview">
                <img id="preview" src="" >
            </div>
            <script>
                function previewImage(event) {
                    const imagePreview = document.getElementById('imagePreview');
                    const preview = document.getElementById('preview');
        
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function() {
                            preview.src = reader.result;
                            imagePreview.style.display = 'block'; // Show the preview
                        }
                        reader.readAsDataURL(file);
                    } else {
                        imagePreview.style.display = 'none'; // Hide the preview if no file is selected
                    }
                }
            </script>
            <!--submit button-->
            <div class="submit-button">
                <button type="submit" id="submit" onclick="validateForm()">Submit</button>
            </div>
        </div>  
        
    </form> 
<script src="index.js"></script>
</body>
</html>